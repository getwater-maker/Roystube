================================================================================
                    RoyStudio í†µí•© ê°€ì´ë“œ - ë¹ ë¥¸ ìš”ì•½
================================================================================

ğŸ“Œ íŒŒì¼ ë³µì‚¬ í›„ RoyYoutubeSearch main.pyì—ì„œ ìˆ˜í–‰í•  ì‘ì—…:

================================================================================
1ï¸âƒ£  main.py ìƒë‹¨ (ì¤„ 44 ë‹¤ìŒ)ì— import ì¶”ê°€
================================================================================

# === RoyStudio í†µí•©ì„ ìœ„í•œ import ===
import io
import base64
from pathlib import Path
import logging
import multiprocessing

try:
    import config as roystudio_config
    import utils
    import services
    from pipeline_processor import PipelineProcessor
    ROYSTUDIO_AVAILABLE = True
except ImportError as e:
    print(f"[ê²½ê³ ] RoyStudio ëª¨ë“ˆ ì¼ë¶€ ì„í¬íŠ¸ ì‹¤íŒ¨: {e}")
    ROYSTUDIO_AVAILABLE = False

try:
    utils.ensure_pydub_ffmpeg_paths()
except:
    pass

logging.getLogger('eel').setLevel(logging.CRITICAL)
logging.getLogger('gevent').setLevel(logging.CRITICAL)
logging.getLogger('matplotlib').setLevel(logging.CRITICAL)


================================================================================
2ï¸âƒ£  Global ë³€ìˆ˜ ì¶”ê°€ (ì¤„ 45-50 ì˜ì—­)
================================================================================

# === RoyStudio ê´€ë ¨ ì „ì—­ ë³€ìˆ˜ ===
roystudio_cancel_event = threading.Event()
roystudio_progress = {'current': 0, 'total': 0, 'message': ''}
whisper_model = None
whisper_model_name = None
whisper_cancel_event = threading.Event()


================================================================================
3ï¸âƒ£  Helper í•¨ìˆ˜ ì¶”ê°€ (if __name__ == '__main__': ì´ì „)
================================================================================

# === RoyStudio Helper Functions ===

def format_timestamp(seconds):
    """ì´ˆë¥¼ SRT íƒ€ì„ìŠ¤íƒ¬í”„ í˜•ì‹ìœ¼ë¡œ ë³€í™˜ (HH:MM:SS,mmm)"""
    hours = int(seconds // 3600)
    minutes = int((seconds % 3600) // 60)
    secs = int(seconds % 60)
    millis = int((seconds % 1) * 1000)
    return f"{hours:02d}:{minutes:02d}:{secs:02d},{millis:03d}"


def normalize_text_for_comparison(text):
    """í…ìŠ¤íŠ¸ ë¹„êµë¥¼ ìœ„í•œ ì •ê·œí™” (ê³µë°±, íŠ¹ìˆ˜ë¬¸ì ì œê±°)"""
    import re
    text = re.sub(r'[^\w\sê°€-í£]', '', text)
    text = re.sub(r'\s+', '', text)
    return text.lower()


================================================================================
4ï¸âƒ£  @eel.expose í•¨ìˆ˜ ì¶”ê°€ (ê¸°íƒ€ expose í•¨ìˆ˜ë“¤ì´ ìˆëŠ” êµ¬ê°„)
================================================================================

âš ï¸ ë‹¤ìŒ í•¨ìˆ˜ë“¤ì„ main.pyì˜ @eel.expose í•¨ìˆ˜ ì„¹ì…˜ì— ì¶”ê°€:

1. select_mp3_for_roystudio()
2. select_txt_for_roystudio()
3. cancel_roystudio_generation()
4. log_roystudio_message()
5. update_roystudio_progress()
6. generate_srt_with_whisper() <- ê°€ì¥ ì¤‘ìš”! ì•½ 260ì¤„

ğŸ“ ìì„¸í•œ ì½”ë“œëŠ” ROYSTUDIO_INTEGRATION_GUIDE.md ì˜ "5ë‹¨ê³„" ì°¸ì¡°


================================================================================
5ï¸âƒ£  requirements.txt ì™„ì „íˆ êµì²´
================================================================================

# YouTube Search & Authentication
eel>=0.16.0
google-auth>=2.23.0
google-auth-oauthlib>=1.1.0
google-api-python-client>=2.100.0
feedparser>=6.0.10
aiohttp>=3.9.0
cryptography>=42.0.0
openpyxl>=3.1.0

# RoyStudio ë¹„ë””ì˜¤ ì œì‘
moviepy>=2.0.0
pillow>=10.0.0
pydub>=0.25.1
librosa>=0.10.0
numpy>=1.24.0
scipy>=1.11.0

# Google Cloud Text-to-Speech
google-cloud-texttospeech>=2.14.0

# Audio/Visualization
matplotlib>=3.7.0
soundfile>=0.12.1

# Text Processing
kss>=4.0.0
requests>=2.31.0
python-docx>=1.0.0

# Additional
decorator>=5.1.1
edge-tts>=6.1.0

# Speech-to-Text
openai-whisper>=20231117


================================================================================
6ï¸âƒ£  build.spec ì—…ë°ì´íŠ¸
================================================================================

VERSION = '2.2.0'  (ë²„ì „ ì—…ê·¸ë ˆì´ë“œ)

hiddenimportsì— ë‹¤ìŒ ì¶”ê°€:
  'moviepy',
  'imageio',
  'imageio_ffmpeg',
  'librosa',
  'google.cloud.texttospeech',
  'google.oauth2.service_account',
  'pydub',
  'matplotlib',
  'numpy',
  'scipy',
  'edge_tts',
  'lxml',
  'lxml.etree',
  'asyncio.windows_events',
  'asyncio.windows_utils',

ğŸ“ ìì„¸í•œ ì½”ë“œëŠ” ROYSTUDIO_INTEGRATION_GUIDE.md ì˜ "7ë‹¨ê³„" ì°¸ì¡°


================================================================================
7ï¸âƒ£  web/index.htmlì— íƒ­ ì¶”ê°€
================================================================================

ê¸°ì¡´ íƒ­ë“¤ ì•„ë˜ì— ìƒˆë¡œìš´ íƒ­ ì¶”ê°€:

<div id="studio-tab" class="tab-content">
    <h2>ğŸ“¹ ì˜ìƒ ìŠ¤íŠœë””ì˜¤ (RoyStudio)</h2>

    (UI ì½”ë“œëŠ” ROYSTUDIO_INTEGRATION_GUIDE.md ì˜ "8ë‹¨ê³„" ì°¸ì¡°)


================================================================================
8ï¸âƒ£  web/script.jsì— JavaScript í•¨ìˆ˜ ì¶”ê°€
================================================================================

selectMp3ForRoyStudio()
selectTxtForRoyStudio()
generateSrtWithWhisper()
cancelSrtGeneration()
logSubtitleMessage() [eel.expose]
updateSubtitleProgress() [eel.expose]

ğŸ“ ìì„¸í•œ ì½”ë“œëŠ” ROYSTUDIO_INTEGRATION_GUIDE.md ì˜ "9ë‹¨ê³„" ì°¸ì¡°


================================================================================
9ï¸âƒ£  web/css/style.cssì— ìŠ¤íƒ€ì¼ ì¶”ê°€ (ì„ íƒì‚¬í•­)
================================================================================

RoyStudioì˜ ìŠ¤íƒ€ì¼ì„ ì°¸ê³ í•˜ì—¬ í•„ìš”í•œ ìŠ¤íƒ€ì¼ ì¶”ê°€


================================================================================
ğŸ”Ÿ í•„ìˆ˜ ì„¤ì¹˜
================================================================================

Python íŒ¨í‚¤ì§€:
  pip install -r requirements.txt

FFmpeg ì„¤ì¹˜ (í•„ìˆ˜!):
  Windows: https://ffmpeg.org/download.html
  macOS: brew install ffmpeg
  Linux: sudo apt install ffmpeg


================================================================================
âœ… ì™„ë£Œ í›„ í…ŒìŠ¤íŠ¸
================================================================================

1. python main.py ë¡œ ì‹¤í–‰
2. YouTube ê²€ìƒ‰ ê¸°ëŠ¥ ì •ìƒ ì‘ë™ í™•ì¸
3. RoyStudio íƒ­ í‘œì‹œ í™•ì¸
4. MP3 + TXT íŒŒì¼ë¡œ SRT ìƒì„± í…ŒìŠ¤íŠ¸
5. pyinstaller build.spec ë¡œ ë¹Œë“œ


================================================================================
ğŸ“š ìƒì„¸ ê°€ì´ë“œ
================================================================================

ROYSTUDIO_INTEGRATION_GUIDE.md íŒŒì¼ì„ ì°¸ê³ í•˜ì„¸ìš”!
- ê° ë‹¨ê³„ë³„ ìƒì„¸ ì½”ë“œ
- ë¬¸ì œ í•´ê²°
- í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸


================================================================================
âš ï¸ ì¤‘ìš” ì‚¬í•­
================================================================================

1. Whisper ëª¨ë¸ì€ ì²˜ìŒ ì‹¤í–‰ ì‹œ ë‹¤ìš´ë¡œë“œë©ë‹ˆë‹¤ (ì‹œê°„ ì†Œìš”)
2. FFmpeg ì„¤ì¹˜ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤ (ì—†ìœ¼ë©´ ë¹„ë””ì˜¤ ì²˜ë¦¬ ë¶ˆê°€)
3. generate_srt_with_whisper() í•¨ìˆ˜ëŠ” ì•½ 260ì¤„ì…ë‹ˆë‹¤
4. ëª¨ë“  íŒŒì¼ ê²½ë¡œëŠ” RoyStudio app_eel.py ì°¸ì¡°

================================================================================
