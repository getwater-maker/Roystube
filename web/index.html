<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로이의 유튜브</title>
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="studio.css">
</head>
<body>
    <div class="app-container">
        <!-- 상단 헤더 -->
        <header class="app-header">
            <div class="header-left">
                <h1 onclick="goHome()" style="cursor: pointer;" title="홈으로">🎬 로이의 유튜브</h1>
                <span class="version">v2.0</span>
            </div>
            <div class="header-right">
                <button class="btn btn-sm" onclick="showApiKeyManager()">🔑 API 키</button>
                <button class="btn btn-sm" onclick="showSettings()">⚙️ 설정</button>
                <button class="btn btn-sm" onclick="showAbout()">ℹ️ 정보</button>
            </div>
        </header>

        <!-- 탭 네비게이션 -->
        <nav class="tab-nav">
            <div class="tab-nav-inner">
                <button class="tab-btn" data-tab="all-channel-monitor">
                    <span class="tab-icon">📺</span> 모든채널모니터
                </button>
                <button class="tab-btn" data-tab="channel-monitor">
                    <span class="tab-icon">📡</span> 채널모니터
                </button>
                <button class="tab-btn" data-tab="keyword-search">
                    <span class="tab-icon">🔍</span> 키워드검색
                </button>
                <button class="tab-btn" data-tab="hot-trend">
                    <span class="tab-icon">🔥</span> 핫트렌드
                </button>
                <button class="tab-btn" data-tab="mutation">
                    <span class="tab-icon">🚀</span> 돌연변이
                </button>
                <button class="tab-btn" data-tab="studio-blackscreen">
                    <span class="tab-icon">⬛</span> 검은화면
                </button>
                <button class="tab-btn active" data-tab="studio-tts-design">
                    <span class="tab-icon">🎨</span> 영상
                </button>
                <button class="tab-btn" data-tab="studio-batch">
                    <span class="tab-icon">📦</span> 배치 제작
                </button>
                <button class="tab-btn" data-tab="studio-youtube">
                    <span class="tab-icon">📺</span> 유튜브
                </button>
                <button class="tab-btn" data-tab="studio-channel-manager">
                    <span class="tab-icon">⚙️</span> 관리
                </button>
                <button class="tab-btn" data-tab="subscription-manager">
                    <span class="tab-icon">⭐</span> 구독관리
                </button>
                <button class="tab-btn" data-tab="account-manager">
                    <span class="tab-icon">🔑</span> 계정 관리
                </button>
                <button class="tab-btn" data-tab="excel-tools">
                    <span class="tab-icon">📊</span> Excel
                </button>
                <button class="tab-btn" data-tab="data-export">
                    <span class="tab-icon">💼</span> 데이터
                </button>
                <button class="tab-btn" data-tab="cache-manager">
                    <span class="tab-icon">🗑️</span> 캐시
                </button>
            </div>
        </nav>

        <!-- 메인 컨텐츠 영역 -->
        <main class="app-main">

            <!-- 모든채널모니터 탭 -->
            <div class="tab-pane" id="tab-all-channel-monitor">
                <div class="section-header">
                    <h2>📺 모든채널모니터</h2>
                    <p class="section-description">등록된 모든 채널의 최신 영상을 모니터링합니다.</p>
                </div>

                <div class="monitor-controls">
                    <div class="control-group">
                        <label>업데이트 간격 (분)</label>
                        <input type="number" id="all-monitor-interval" value="30" min="5" max="1440">
                    </div>
                    <button onclick="startAllChannelMonitor()" class="btn btn-primary">🔄 모니터링 시작</button>
                    <button onclick="stopAllChannelMonitor()" class="btn btn-secondary">⏹️ 중지</button>
                    <button onclick="refreshAllChannels()" class="btn">새로고침</button>
                </div>

                <div class="video-grid" id="all-channel-video-grid">
                    <!-- 영상 카드들이 여기에 동적으로 추가됨 -->
                </div>
            </div>

            <!-- 채널모니터 탭 -->
            <div class="tab-pane" id="tab-channel-monitor">
                <div class="section-header">
                    <h2>📺 채널모니터</h2>
                    <p class="section-description">특정 채널의 영상을 모니터링합니다.</p>
                </div>

                <div class="monitor-controls">
                    <div class="control-group">
                        <label>채널 선택</label>
                        <select id="channel-select" onchange="onChannelChange()">
                            <option value="">채널을 선택하세요</option>
                            <!-- 채널 목록이 동적으로 로드됨 -->
                        </select>
                    </div>
                    <div class="control-group">
                        <label>업데이트 간격 (분)</label>
                        <input type="number" id="channel-monitor-interval" value="30" min="5" max="1440">
                    </div>
                    <button onclick="startChannelMonitor()" class="btn btn-primary">🔄 모니터링 시작</button>
                    <button onclick="stopChannelMonitor()" class="btn btn-secondary">⏹️ 중지</button>
                    <button onclick="refreshChannel()" class="btn">새로고침</button>
                </div>

                <div class="video-grid" id="channel-video-grid">
                    <!-- 영상 카드들이 여기에 동적으로 추가됨 -->
                </div>
            </div>

            <!-- 키워드검색 탭 -->
            <div class="tab-pane" id="tab-keyword-search">
                <div class="section-header">
                    <h2>🔍 키워드검색</h2>
                    <p class="section-description">키워드로 유튜브 영상을 검색합니다.</p>
                </div>

                <div class="search-controls">
                    <div class="control-group">
                        <label>검색 키워드</label>
                        <input type="text" id="search-keyword" placeholder="검색할 키워드를 입력하세요">
                    </div>
                    <div class="control-group">
                        <label>최대 결과 수</label>
                        <input type="number" id="search-max-results" value="50" min="1" max="200">
                    </div>
                    <div class="control-group">
                        <label>정렬 기준</label>
                        <select id="search-order">
                            <option value="relevance">관련성</option>
                            <option value="date">업로드 날짜</option>
                            <option value="viewCount">조회수</option>
                            <option value="rating">평점</option>
                        </select>
                    </div>
                    <button onclick="searchVideos()" class="btn btn-primary">🔍 검색</button>
                </div>

                <div class="video-grid" id="search-video-grid">
                    <!-- 검색 결과가 여기에 동적으로 추가됨 -->
                </div>
            </div>

            <!-- 핫트렌드 탭 -->
            <div class="tab-pane" id="tab-hot-trend">
                <div class="section-header">
                    <h2>🔥 핫트렌드</h2>
                    <p class="section-description">유튜브 인기 트렌드를 확인합니다.</p>
                </div>

                <div class="trend-controls">
                    <div class="control-group">
                        <label>카테고리</label>
                        <select id="trend-category">
                            <option value="">전체</option>
                            <option value="10">음악</option>
                            <option value="20">게임</option>
                            <option value="22">브이로그</option>
                            <option value="24">엔터테인먼트</option>
                            <option value="25">뉴스/정치</option>
                            <option value="26">하우투/스타일</option>
                            <option value="28">과학/기술</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>최대 결과 수</label>
                        <input type="number" id="trend-max-results" value="50" min="1" max="200">
                    </div>
                    <button onclick="getTrendingVideos()" class="btn btn-primary">🔥 트렌드 가져오기</button>
                </div>

                <div class="video-grid" id="trend-video-grid">
                    <!-- 트렌드 영상이 여기에 동적으로 추가됨 -->
                </div>
            </div>

            <!-- 돌연변이 탭 -->
            <div class="tab-pane" id="tab-mutation">
                <div class="section-header">
                    <h2>🚀 돌연변이</h2>
                    <p class="section-description">급상승한 영상을 분석합니다.</p>
                </div>

                <div class="mutation-controls">
                    <div class="control-group">
                        <label>분석 기간</label>
                        <select id="mutation-period">
                            <option value="24">24시간</option>
                            <option value="48">48시간</option>
                            <option value="72">72시간</option>
                            <option value="168">1주일</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>최소 증가율 (%)</label>
                        <input type="number" id="mutation-min-growth" value="100" min="10" max="10000">
                    </div>
                    <button onclick="analyzeMutations()" class="btn btn-primary">🚀 분석 시작</button>
                </div>

                <div class="video-grid" id="mutation-video-grid">
                    <!-- 돌연변이 영상이 여기에 동적으로 추가됨 -->
                </div>
            </div>

            <!-- 검은 화면 제작 탭 -->
            <div class="tab-pane" id="tab-studio-blackscreen">
                <div class="blackscreen-container">
                    <div class="blackscreen-header">
                        <h2>🎬 검은 화면 비디오 생성</h2>
                        <p>타이머가 포함된 배경 영상을 생성합니다</p>
                    </div>
                    <div class="blackscreen-content">
                        <div class="blackscreen-preview-section">
                            <h3>미리보기</h3>
                            <div id="blackscreen-preview-box" class="blackscreen-preview-box">
                                <canvas id="blackscreen-preview-canvas"></canvas>
                            </div>
                        </div>
                        <div class="blackscreen-settings-section">
                            <h3>설정</h3>
                            <div class="setting-group">
                                <label class="setting-label">영상 길이</label>
                                <div class="time-input-group">
                                    <input type="number" id="blackscreen-hours" min="0" max="23" value="0">
                                    <span>시간</span>
                                    <input type="number" id="blackscreen-minutes" min="0" max="59" value="5">
                                    <span>분</span>
                                    <input type="number" id="blackscreen-seconds" min="0" max="59" value="0">
                                    <span>초</span>
                                </div>
                            </div>
                            <div class="setting-group">
                                <label>
                                    <input type="checkbox" id="blackscreen-timer-toggle" checked>
                                    타이머 표시
                                </label>
                            </div>
                            <div class="setting-group">
                                <label class="setting-label">저장 위치</label>
                                <div class="path-input-group">
                                    <input type="text" id="blackscreen-output-path" readonly placeholder="저장 폴더 선택">
                                    <button onclick="studioSelectBlackscreenOutput()" class="btn btn-sm">📂</button>
                                </div>
                            </div>
                            <div class="setting-group">
                                <button onclick="studioGenerateBlackscreen()" class="btn btn-primary btn-large">
                                    🎬 영상 생성
                                </button>
                            </div>
                            <div id="blackscreen-progress-container" style="display: none;">
                                <div class="progress-info">
                                    <span id="blackscreen-progress-label">준비 중...</span>
                                    <span id="blackscreen-progress-percent">0%</span>
                                </div>
                                <div class="progress-bar-bg">
                                    <div id="blackscreen-progress-bar" class="progress-bar"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 영상 탭 (TTS 디자인) -->
            <div class="tab-pane active" id="tab-studio-tts-design">
                <!-- 통합 영상 디자인 (2:6:2 레이아웃) -->
                <div class="design-container">

                    <!-- 1열 (20%) - 좌측: 컨트롤 패널 -->
                    <div class="design-left-col">

                        <!-- 미리보기 -->
                        <div class="design-section">
                            <div class="section-header-simple" style="display: flex; justify-content: space-between; align-items: center;">
                                <h3>🎬 미리보기</h3>
                                <div style="display: flex; gap: 6px;">
                                    <button onclick="resetStudioDesign()" class="btn-icon" title="초기화">
                                        🔄
                                    </button>
                                    <button onclick="selectAndAddBackground()" class="btn-icon" title="배경 추가">
                                        🖼️
                                    </button>
                                    <button onclick="selectAndAnalyzeScript()" class="btn-icon" title="대본 추가 및 분석">
                                        📥
                                    </button>
                                </div>
                            </div>
                            <div class="preview-box" onclick="openPreviewPopup()" style="cursor: pointer;">
                                <canvas id="studio-preview-canvas" width="400" height="225"></canvas>
                            </div>
                        </div>

                        <!-- 영상 설정 -->
                        <div class="design-section">
                            <div class="section-header-simple" style="display: flex; justify-content: space-between; align-items: center; gap: 8px;">
                                <h3>⚙️ 영상 설정</h3>
                                <select id="studio-resolution" style="width: auto; min-width: 120px; font-size: 11px; padding: 4px 8px;">
                                    <option value="1920x1080" selected>1920x1080</option>
                                    <option value="1280x720">1280x720</option>
                                    <option value="3840x2160">3840x2160</option>
                                </select>
                            </div>
                            <!-- FPS와 품질은 숨김 처리, 기본값 고정 -->
                            <input type="hidden" id="studio-fps" value="30">
                            <input type="hidden" id="studio-quality" value="high">
                        </div>

                        <!-- 출력 섹션 -->
                        <div class="design-section">
                            <div class="section-header-simple">
                                <h3>🎬 출력</h3>
                            </div>
                            <div class="output-settings">
                                <div id="studio-progress" class="quick-convert-progress" style="display: none;">
                                    <div class="progress-text" id="studio-progress-text">처리 중...</div>
                                    <div class="progress-bar-container">
                                        <div class="progress-bar" id="studio-progress-bar"></div>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 6px;">
                                    <button onclick="generateVideo()" class="btn-sm btn-success" style="flex: 1;">
                                        🎬 영상
                                    </button>
                                    <button onclick="generateEQ()" class="btn-sm" style="flex: 1;">
                                        🎛️ EQ
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 작업 로그 -->
                        <div class="design-section" style="flex: 1; min-height: 150px;">
                            <div class="section-header-simple">
                                <h3>📋 작업 로그</h3>
                            </div>
                            <div class="log-container" id="studio-log">
                                <div class="log-entry info">시스템 준비 완료</div>
                            </div>
                        </div>

                    </div>

                    <!-- 2열 (60%) - 중앙: 타임라인/문장 편집 -->
                    <div class="design-center-col">
                        <div class="design-section full-height">
                            <div class="section-header-simple">
                                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                                    <h3>🎬 타임라인 & 문장 편집</h3>
                                    <div style="display: flex; gap: 8px;">
                                        <button onclick="convertMP3toSRT()" class="btn" style="padding: var(--spacing-sm) var(--spacing-lg); font-size: 13px; font-weight: 600; background: var(--bg-tertiary); border: 1px solid var(--border-color);">
                                            🎵 MP3 → SRT
                                        </button>
                                        <button onclick="calculateTimecodeAndGenerateMP3()" class="btn btn-primary" style="padding: var(--spacing-sm) var(--spacing-lg); font-size: 13px; font-weight: 600;">
                                            ⏱️ 타임코드 계산 및 MP3 다운
                                        </button>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 8px; margin-top: 8px;">
                                    <button onclick="addSentence()" class="btn-sm btn-primary">+ 문장 추가</button>
                                    <button onclick="selectAllSentences()" class="btn-sm">전체 선택</button>
                                    <button onclick="deleteSelectedSentences()" class="btn-sm btn-danger">선택 삭제</button>
                                </div>
                            </div>

                            <!-- 문장 목록 -->
                            <div class="sentence-list-container" id="studio-sentence-list">
                                <!-- 동적으로 문장 아이템이 추가됨 -->
                                <!-- 예시:
                                <div class="sentence-item" data-id="1">
                                    <input type="checkbox" class="sentence-checkbox">
                                    <div class="sentence-number">1</div>
                                    <div class="sentence-color" style="background: #6495ED"></div>
                                    <div class="sentence-time">00:00:00 → 00:00:05</div>
                                    <div class="sentence-text" contenteditable="true">문장 내용</div>
                                    <div class="sentence-character">강유</div>
                                    <button class="btn-icon-sm" onclick="previewSentence(1)">▶</button>
                                    <button class="btn-icon-sm" onclick="editSentence(1)">✏️</button>
                                    <button class="btn-icon-sm danger" onclick="deleteSentence(1)">🗑️</button>
                                </div>
                                -->
                            </div>
                        </div>
                    </div>

                    <!-- 3열 (20%) - 우측: 캐릭터 음성 조절 -->
                    <div class="design-right-col">
                        <div class="design-section full-height">
                            <div class="section-header-simple" style="display: flex; justify-content: space-between; align-items: center;">
                                <h3>🎤 캐릭터 관리</h3>
                                <button class="btn-sm" onclick="openAllCharactersModal()" title="전체 캐릭터 관리">📋 전체</button>
                            </div>

                            <!-- 캐릭터 목록 -->
                            <div class="character-list-container" id="studio-character-list">
                                <!-- 동적으로 캐릭터 아이템이 추가됨 -->
                                <!-- 예시:
                                <div class="character-item" data-id="1">
                                    <div class="character-header">
                                        <div class="character-name">
                                            <div class="character-color" style="background: #6495ED"></div>
                                            <input type="text" value="강유" class="character-name-input">
                                        </div>
                                        <button class="btn-icon-sm" onclick="previewCharacterVoice(1)">🔊</button>
                                        <button class="btn-icon-sm danger" onclick="deleteCharacter(1)">🗑️</button>
                                    </div>
                                    <div class="character-settings">
                                        <div class="form-row">
                                            <label>음성</label>
                                            <select class="character-voice-select">
                                                <option value="ko-KR-Wavenet-A">Wavenet A (여성)</option>
                                            </select>
                                        </div>
                                        <div class="slider-row">
                                            <label>속도</label>
                                            <input type="range" min="0.25" max="4.0" step="0.05" value="1.0">
                                            <span class="slider-value">1.0x</span>
                                        </div>
                                        <div class="slider-row">
                                            <label>피치</label>
                                            <input type="range" min="-20" max="20" step="0.5" value="0">
                                            <span class="slider-value">0.0</span>
                                        </div>
                                        <div class="slider-row">
                                            <label>볼륨</label>
                                            <input type="range" min="0" max="200" step="5" value="100">
                                            <span class="slider-value">100%</span>
                                        </div>
                                        <div class="form-row">
                                            <label>🎭 감정/톤</label>
                                            <select class="character-emotion-select">
                                                <option value="neutral">보통</option>
                                                <option value="happy">기쁨</option>
                                                <option value="sad">슬픔</option>
                                                <option value="angry">화남</option>
                                                <option value="excited">흥분</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                -->
                            </div>

                        </div>
                    </div>

                </div>
            </div>

            <!-- 고급 디자인 subtab -->
                <div class="subtab-content" id="subtab-advanced-design">
                <div class="design-container" style="margin-top: 0;">
                    <!-- 왼쪽 열: 미리보기 및 프로젝트 설정 -->
                    <div class="design-left-col">
                        <!-- 미리보기 -->
                        <div class="design-section">
                            <div class="section-header-simple">
                                <h3>🎬 미리보기</h3>
                            </div>
                            <div class="preview-box">
                                <canvas id="advanced-preview-canvas" width="400" height="225"></canvas>
                            </div>
                            <div style="margin-top: 10px;">
                                <button onclick="advancedPlayPreview()" class="btn-large btn-primary" style="width: 100%; margin-bottom: 5px;">
                                    ▶ 전체 미리보기
                                </button>
                                <button onclick="advancedStopPreview()" class="btn-large btn-secondary" style="width: 100%;">
                                    ⏹ 정지
                                </button>
                            </div>
                        </div>

                        <!-- 프로젝트 설정 -->
                        <div class="design-section">
                            <div class="section-header-simple">
                                <h3>⚙️ 프로젝트 설정</h3>
                            </div>
                            <div class="output-settings">
                                <div class="form-row">
                                    <label>📁 저장 위치</label>
                                    <div class="input-with-btn">
                                        <input type="text" id="advanced-output-folder" readonly placeholder="출력 폴더 선택">
                                        <button onclick="advancedSelectOutputFolder()" class="btn-icon">📂</button>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <label>📝 프로젝트 이름</label>
                                    <input type="text" id="advanced-project-name" placeholder="프로젝트 이름 입력">
                                </div>
                            </div>
                        </div>

                        <!-- 배경음악 -->
                        <div class="design-section">
                            <div class="section-header-simple">
                                <h3>🎵 배경음악</h3>
                            </div>
                            <div class="output-settings">
                                <div class="form-row">
                                    <label>음악 파일</label>
                                    <div class="input-with-btn">
                                        <input type="text" id="advanced-bgm-path" readonly placeholder="MP3, WAV">
                                        <button onclick="advancedSelectBGM()" class="btn-icon">📂</button>
                                    </div>
                                </div>
                                <div class="slider-row">
                                    <label>배경음악 볼륨</label>
                                    <input type="range" min="0" max="100" step="1" value="30" id="advanced-bgm-volume"
                                           oninput="advancedUpdateBGMVolume(this.value, this)">
                                    <span class="slider-value">30%</span>
                                </div>
                                <div class="form-row">
                                    <label>
                                        <input type="checkbox" id="advanced-bgm-loop" checked>
                                        반복 재생
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 생성 버튼 -->
                        <div class="design-section">
                            <div id="advanced-progress" class="quick-convert-progress" style="display: none; margin-bottom: 15px;">
                                <div class="progress-text">처리 중...</div>
                                <div class="progress-bar-container">
                                    <div class="progress-bar" id="advanced-progress-bar"></div>
                                </div>
                            </div>
                            <button onclick="advancedGenerate()" class="btn-large btn-primary" style="margin-bottom: 10px;">
                                🎬 영상 생성
                            </button>
                            <button onclick="advancedGenerateAudioOnly()" class="btn-large btn-secondary">
                                🎵 오디오만 생성
                            </button>
                        </div>
                    </div>

                    <!-- 가운데 열: 타임라인 및 문장 편집 -->
                    <div class="design-center-col">
                        <div class="design-section full-height">
                            <div class="section-header-simple">
                                <h3>🎬 타임라인 편집</h3>
                                <button onclick="advancedAddSentence()" class="btn-sm btn-primary">+ 문장 추가</button>
                            </div>

                            <!-- 타임라인 툴바 -->
                            <div class="output-settings" style="margin-bottom: 10px;">
                                <div class="form-row">
                                    <button onclick="advancedImportScript()" class="btn-sm">📄 대본 불러오기</button>
                                    <button onclick="advancedSaveProject()" class="btn-sm">💾 프로젝트 저장</button>
                                    <button onclick="advancedLoadProject()" class="btn-sm">📂 프로젝트 열기</button>
                                    <button onclick="advancedClearAll()" class="btn-sm btn-secondary">🗑️ 전체 삭제</button>
                                </div>
                            </div>

                            <!-- 문장 목록 -->
                            <div class="sentence-list-container" id="advanced-sentence-list">
                                <!-- 문장 아이템들이 동적으로 추가됨 -->
                                <!-- 예시 구조:
                                <div class="sentence-item advanced">
                                    <div class="sentence-handle">⋮⋮</div>
                                    <input type="checkbox" checked>
                                    <div class="sentence-time-edit">
                                        <input type="text" value="00:00:00" class="time-input">
                                        →
                                        <input type="text" value="00:00:05" class="time-input">
                                    </div>
                                    <div class="sentence-text" contenteditable="true">문장 내용</div>
                                    <select class="sentence-voice-select">
                                        <option>Wavenet-A</option>
                                    </select>
                                    <button class="btn-icon-sm">🎤</button>
                                    <button class="btn-icon-sm">▶</button>
                                    <button class="btn-icon-sm">🗑️</button>
                                </div>
                                -->
                            </div>
                        </div>
                    </div>

                    <!-- 오른쪽 열: 효과 및 세부 설정 -->
                    <div class="design-right-col">
                        <div class="design-section full-height">
                            <div class="section-header-simple">
                                <h3>🎛️ 오디오 효과</h3>
                            </div>

                            <!-- 전체 볼륨 -->
                            <div class="output-settings" style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #333;">
                                <div class="slider-row">
                                    <label>🔊 전체 볼륨</label>
                                    <input type="range" min="0" max="200" step="1" value="100" id="advanced-master-volume"
                                           oninput="advancedUpdateMasterVolume(this.value, this)">
                                    <span class="slider-value">100%</span>
                                </div>
                            </div>

                            <!-- 페이드 효과 -->
                            <div class="output-settings" style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #333;">
                                <div class="form-row">
                                    <label style="font-weight: bold;">🎚️ 페이드 효과</label>
                                </div>
                                <div class="slider-row">
                                    <label>페이드 인 (초)</label>
                                    <input type="range" min="0" max="5" step="0.1" value="0" id="advanced-fade-in"
                                           oninput="advancedUpdateFadeIn(this.value, this)">
                                    <span class="slider-value">0.0s</span>
                                </div>
                                <div class="slider-row">
                                    <label>페이드 아웃 (초)</label>
                                    <input type="range" min="0" max="5" step="0.1" value="0" id="advanced-fade-out"
                                           oninput="advancedUpdateFadeOut(this.value, this)">
                                    <span class="slider-value">0.0s</span>
                                </div>
                            </div>

                            <!-- 문장 간격 -->
                            <div class="output-settings" style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #333;">
                                <div class="slider-row">
                                    <label>⏱️ 문장 간격 (초)</label>
                                    <input type="range" min="0" max="3" step="0.1" value="0.5" id="advanced-sentence-gap"
                                           oninput="advancedUpdateSentenceGap(this.value, this)">
                                    <span class="slider-value">0.5s</span>
                                </div>
                            </div>

                            <!-- 프리셋 관리 -->
                            <div class="output-settings">
                                <div class="form-row">
                                    <label style="font-weight: bold;">💾 프리셋 관리</label>
                                </div>
                                <div class="form-row">
                                    <select id="advanced-preset-list" style="width: 100%;">
                                        <option value="">프리셋 선택</option>
                                        <!-- 프리셋 목록이 동적으로 추가됨 -->
                                    </select>
                                </div>
                                <div class="form-row">
                                    <button onclick="advancedSavePreset()" class="btn-sm" style="width: 48%; margin-right: 4%;">
                                        💾 저장
                                    </button>
                                    <button onclick="advancedLoadPreset()" class="btn-sm" style="width: 48%;">
                                        📂 불러오기
                                    </button>
                                </div>
                                <div class="form-row">
                                    <button onclick="advancedDeletePreset()" class="btn-sm btn-secondary" style="width: 100%;">
                                        🗑️ 프리셋 삭제
                                    </button>
                                </div>
                            </div>

                            <!-- 효과음 -->
                            <div class="output-settings" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #333;">
                                <div class="form-row">
                                    <label style="font-weight: bold;">🔔 효과음</label>
                                </div>
                                <div class="form-row">
                                    <button onclick="advancedAddSoundEffect()" class="btn-sm btn-primary" style="width: 100%;">
                                        + 효과음 추가
                                    </button>
                                </div>
                                <div id="advanced-sound-effects-list">
                                    <!-- 효과음 목록이 동적으로 추가됨 -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 고급 디자인 subtab 끝 -->

            </div>
            <!-- 영상 탭 (TTS 디자인) 끝 -->

            <!-- 배치 탭 -->
            <div class="tab-pane" id="tab-studio-batch">
                <!-- 배치 제작 3열 레이아웃 -->
                <div class="design-container">

                    <!-- 1열 (20%) - 좌측: 대본 파일 목록 -->
                    <div class="design-left-col">
                        <div class="design-section full-height">
                            <div class="section-header-simple">
                                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                                    <h3>📁 대본 파일</h3>
                                    <button onclick="batchAddScripts()" class="btn-sm btn-primary">+ 추가</button>
                                </div>
                            </div>

                            <!-- 드래그앤드롭 영역 -->
                            <div class="batch-dropzone" id="batch-dropzone"
                                 ondrop="batchHandleDrop(event)"
                                 ondragover="batchHandleDragOver(event)"
                                 ondragleave="batchHandleDragLeave(event)">
                                <div class="dropzone-content">
                                    <div class="dropzone-icon">📄</div>
                                    <div class="dropzone-text">대본 파일을 드래그하거나<br>클릭하여 추가</div>
                                    <div class="dropzone-hint">TXT, DOCX 지원</div>
                                </div>
                            </div>

                            <!-- 대본 파일 목록 -->
                            <div class="batch-script-list" id="batch-script-list">
                                <!-- 동적으로 추가됨 -->
                                <!-- 예시:
                                <div class="batch-script-item" data-id="1">
                                    <input type="checkbox" class="batch-script-checkbox" checked>
                                    <div class="batch-script-info">
                                        <div class="batch-script-name">대본1.txt</div>
                                        <div class="batch-script-status">대기 중</div>
                                    </div>
                                    <button class="btn-icon-sm" onclick="batchRemoveScript(1)">🗑️</button>
                                </div>
                                -->
                            </div>

                            <!-- 전체 선택/해제 -->
                            <div class="batch-script-actions">
                                <button onclick="batchSelectAll()" class="btn-sm">전체 선택</button>
                                <button onclick="batchDeselectAll()" class="btn-sm">전체 해제</button>
                                <button onclick="batchRemoveSelected()" class="btn-sm btn-danger">선택 삭제</button>
                            </div>
                        </div>
                    </div>

                    <!-- 2열 (60%) - 중앙: 작업 큐 & 진행 상황 -->
                    <div class="design-center-col">
                        <div class="design-section full-height">
                            <div class="section-header-simple">
                                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                                    <h3>📋 작업 큐</h3>
                                    <div style="display: flex; gap: 8px;">
                                        <button onclick="batchStartAll()" class="btn btn-primary" id="batch-start-btn">
                                            ▶️ 일괄 시작
                                        </button>
                                        <button onclick="batchStopAll()" class="btn btn-danger" id="batch-stop-btn" disabled>
                                            ⏹️ 중지
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- 전체 진행률 -->
                            <div class="batch-overall-progress" id="batch-overall-progress">
                                <div class="batch-progress-header">
                                    <span class="batch-progress-title">전체 진행률</span>
                                    <span class="batch-progress-count" id="batch-progress-count">0 / 0</span>
                                </div>
                                <div class="batch-progress-bar-container">
                                    <div class="batch-progress-bar" id="batch-overall-bar" style="width: 0%"></div>
                                </div>
                                <div class="batch-progress-stats">
                                    <span id="batch-stats-completed">✅ 완료: 0</span>
                                    <span id="batch-stats-processing">🔄 진행: 0</span>
                                    <span id="batch-stats-pending">⏳ 대기: 0</span>
                                    <span id="batch-stats-failed">❌ 실패: 0</span>
                                </div>
                            </div>

                            <!-- 작업 목록 -->
                            <div class="batch-job-list" id="batch-job-list">
                                <!-- 동적으로 추가됨 -->
                                <!-- 예시:
                                <div class="batch-job-item" data-id="1">
                                    <div class="batch-job-status pending">⏳</div>
                                    <div class="batch-job-info">
                                        <div class="batch-job-name">대본1.txt</div>
                                        <div class="batch-job-detail">문장 25개 | 캐릭터 3명</div>
                                    </div>
                                    <div class="batch-job-progress">
                                        <div class="batch-job-progress-bar" style="width: 0%"></div>
                                    </div>
                                    <div class="batch-job-time">--:--</div>
                                    <div class="batch-job-actions">
                                        <button class="btn-icon-sm" onclick="batchRetryJob(1)">🔄</button>
                                        <button class="btn-icon-sm" onclick="batchOpenFolder(1)">📂</button>
                                    </div>
                                </div>
                                -->
                            </div>

                            <!-- 작업 로그 -->
                            <div class="batch-log-section">
                                <div class="section-header-simple">
                                    <h3>📋 작업 로그</h3>
                                </div>
                                <div class="log-container" id="batch-log">
                                    <div class="log-entry info">배치 제작 시스템 준비 완료</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 3열 (20%) - 우측: 공통 설정 -->
                    <div class="design-right-col">
                        <div class="design-section full-height">
                            <div class="section-header-simple">
                                <h3>⚙️ 공통 설정</h3>
                            </div>

                            <!-- 출력 형식 -->
                            <div class="batch-settings-group">
                                <div class="batch-settings-title">📦 출력 형식</div>
                                <div class="batch-checkbox-group">
                                    <label class="batch-checkbox-label">
                                        <input type="checkbox" id="batch-output-mp3" checked>
                                        <span>MP3 (음성)</span>
                                    </label>
                                    <label class="batch-checkbox-label">
                                        <input type="checkbox" id="batch-output-srt" checked>
                                        <span>SRT (자막)</span>
                                    </label>
                                    <label class="batch-checkbox-label">
                                        <input type="checkbox" id="batch-output-video">
                                        <span>MP4 (영상)</span>
                                    </label>
                                </div>
                            </div>

                            <!-- 출력 폴더 -->
                            <div class="batch-settings-group">
                                <div class="batch-settings-title">📁 출력 위치</div>
                                <div class="batch-radio-group">
                                    <label class="batch-radio-label">
                                        <input type="radio" name="batch-output-location" value="same" checked>
                                        <span>대본과 같은 폴더</span>
                                    </label>
                                    <label class="batch-radio-label">
                                        <input type="radio" name="batch-output-location" value="custom">
                                        <span>지정 폴더</span>
                                    </label>
                                </div>
                                <div class="input-with-btn" id="batch-custom-folder-row" style="display: none; margin-top: 8px;">
                                    <input type="text" id="batch-output-folder" readonly placeholder="폴더 선택">
                                    <button onclick="batchSelectOutputFolder()" class="btn-icon">📂</button>
                                </div>
                            </div>

                            <!-- 기본 음성 설정 -->
                            <div class="batch-settings-group">
                                <div class="batch-settings-title">🎤 기본 음성</div>
                                <div class="form-row">
                                    <label>신규 캐릭터 기본 음성</label>
                                    <select id="batch-default-voice">
                                        <optgroup label="🌟 Wavenet (권장)">
                                            <option value="ko-KR-Wavenet-A">여성 A</option>
                                            <option value="ko-KR-Wavenet-B">여성 B</option>
                                            <option value="ko-KR-Wavenet-C">남성 C</option>
                                            <option value="ko-KR-Wavenet-D" selected>남성 D</option>
                                        </optgroup>
                                        <optgroup label="🎭 Neural2">
                                            <option value="ko-KR-Neural2-A">여성 A</option>
                                            <option value="ko-KR-Neural2-B">여성 B</option>
                                            <option value="ko-KR-Neural2-C">남성 C</option>
                                        </optgroup>
                                        <optgroup label="📢 Standard">
                                            <option value="ko-KR-Standard-A">여성 A</option>
                                            <option value="ko-KR-Standard-B">여성 B</option>
                                            <option value="ko-KR-Standard-C">남성 C</option>
                                            <option value="ko-KR-Standard-D">남성 D</option>
                                        </optgroup>
                                    </select>
                                </div>
                                <div class="slider-row">
                                    <label>속도</label>
                                    <input type="range" min="0.5" max="2.0" step="0.1" value="1.0" id="batch-default-speed"
                                           oninput="document.getElementById('batch-speed-value').textContent = this.value + 'x'">
                                    <span class="slider-value" id="batch-speed-value">1.0x</span>
                                </div>
                                <div class="slider-row">
                                    <label>피치</label>
                                    <input type="range" min="-10" max="10" step="1" value="0" id="batch-default-pitch"
                                           oninput="document.getElementById('batch-pitch-value').textContent = this.value">
                                    <span class="slider-value" id="batch-pitch-value">0</span>
                                </div>
                            </div>

                            <!-- Chirp3-HD MP3 후처리 속도 -->
                            <div class="batch-settings-group" id="batch-postspeed-settings">
                                <div class="batch-settings-title">🔧 Chirp3-HD 후처리</div>
                                <div class="batch-postspeed-info">
                                    <small>Chirp3-HD 모델은 API 속도 조절이 불가하여<br>FFmpeg로 MP3 속도를 후처리합니다.</small>
                                </div>
                                <div class="slider-row postspeed-row">
                                    <label>MP3속도</label>
                                    <input type="range" min="0.5" max="2.0" step="0.05" value="1.0" id="batch-default-postspeed"
                                           oninput="document.getElementById('batch-postspeed-value').textContent = parseFloat(this.value).toFixed(2) + 'x'">
                                    <span class="slider-value" id="batch-postspeed-value">1.00x</span>
                                </div>
                                <label class="batch-checkbox-label">
                                    <input type="checkbox" id="batch-apply-postspeed-all">
                                    <span>모든 Chirp3-HD 캐릭터에 적용</span>
                                </label>
                            </div>

                            <!-- 영상 설정 (MP4 선택 시) -->
                            <div class="batch-settings-group" id="batch-video-settings" style="display: none;">
                                <div class="batch-settings-title">🎬 영상 설정</div>
                                <div class="form-row">
                                    <label>해상도</label>
                                    <select id="batch-resolution">
                                        <option value="1920x1080" selected>1920x1080 (FHD)</option>
                                        <option value="1280x720">1280x720 (HD)</option>
                                        <option value="3840x2160">3840x2160 (4K)</option>
                                    </select>
                                </div>
                                <div class="form-row">
                                    <label>배경</label>
                                    <div class="input-with-btn">
                                        <input type="text" id="batch-background" readonly placeholder="검은 배경 (기본)">
                                        <button onclick="batchSelectBackground()" class="btn-icon">🖼️</button>
                                    </div>
                                </div>
                            </div>

                            <!-- 고급 옵션 -->
                            <div class="batch-settings-group">
                                <div class="batch-settings-title">🔧 고급 옵션</div>
                                <label class="batch-checkbox-label">
                                    <input type="checkbox" id="batch-use-db-characters" checked>
                                    <span>저장된 캐릭터 설정 사용</span>
                                </label>
                                <label class="batch-checkbox-label">
                                    <input type="checkbox" id="batch-auto-retry">
                                    <span>실패 시 자동 재시도</span>
                                </label>
                                <label class="batch-checkbox-label">
                                    <input type="checkbox" id="batch-notify-complete" checked>
                                    <span>완료 시 알림</span>
                                </label>
                            </div>

                        </div>
                    </div>

                </div>
            </div>

            <!-- 유튜브 탭 -->
            <div class="tab-pane" id="tab-studio-youtube">
                <div class="section-header">
                    <h2>📺 유튜브</h2>
                    <p class="section-description">유튜브 업로드 및 관리 작업을 수행합니다.</p>
                </div>

                <div class="youtube-container">
                    <div class="youtube-section">
                        <h3>📤 업로드</h3>
                        <div class="setting-group">
                            <label class="setting-label">비디오 파일</label>
                            <div class="path-input-group">
                                <input type="text" id="youtube-video-file" readonly placeholder="비디오 파일 선택">
                                <button onclick="youtubeSelectVideo()" class="btn btn-sm">📂</button>
                            </div>
                        </div>
                        <div class="setting-group">
                            <label class="setting-label">제목</label>
                            <input type="text" id="youtube-title" placeholder="영상 제목">
                        </div>
                        <div class="setting-group">
                            <label class="setting-label">설명</label>
                            <textarea id="youtube-description" rows="5" placeholder="영상 설명"></textarea>
                        </div>
                        <div class="setting-group">
                            <label class="setting-label">태그</label>
                            <input type="text" id="youtube-tags" placeholder="태그1, 태그2, 태그3">
                        </div>
                        <div class="setting-group">
                            <label class="setting-label">카테고리</label>
                            <select id="youtube-category">
                                <option value="22">브이로그</option>
                                <option value="10">음악</option>
                                <option value="20">게임</option>
                                <option value="24">엔터테인먼트</option>
                                <option value="28">과학/기술</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label class="setting-label">공개 설정</label>
                            <select id="youtube-privacy">
                                <option value="private">비공개</option>
                                <option value="unlisted">일부 공개</option>
                                <option value="public">공개</option>
                            </select>
                        </div>
                        <button onclick="youtubeUpload()" class="btn btn-primary btn-large">
                            📤 업로드
                        </button>
                    </div>
                </div>
            </div>

            <!-- 관리 탭 -->
            <div class="tab-pane" id="tab-studio-channel-manager">
                <div class="section-header">
                    <h2>⚙️ 채널 관리</h2>
                    <p class="section-description">유튜브 채널 및 계정을 관리합니다.</p>
                </div>

                <div class="manager-container">
                    <div class="manager-section">
                        <h3>📋 등록된 채널</h3>
                        <div class="channel-list" id="manager-channel-list">
                            <!-- 채널 목록이 동적으로 추가됨 -->
                        </div>
                        <button onclick="managerAddChannel()" class="btn btn-primary">
                            ➕ 채널 추가
                        </button>
                    </div>

                    <div class="manager-section">
                        <h3>🔑 API 계정</h3>
                        <div class="account-list" id="manager-account-list">
                            <!-- 계정 목록이 동적으로 추가됨 -->
                        </div>
                        <button onclick="managerAddAccount()" class="btn btn-primary">
                            ➕ 계정 추가
                        </button>
                    </div>
                </div>
            </div>


            <!-- 구독 관리 탭 -->
            <div class="tab-pane" id="tab-subscription-manager">
                <div class="section-header">
                    <h2>⭐ 구독 관리</h2>
                    <p class="section-description">YouTube 구독을 관리합니다.</p>
                </div>

                <div class="subscription-controls">
                    <button onclick="loadSubscriptions()" class="btn btn-primary">🔄 구독 목록 새로고침</button>
                    <button onclick="exportSubscriptions()" class="btn">📤 내보내기</button>
                    <button onclick="importSubscriptions()" class="btn">📥 가져오기</button>
                    <button onclick="clearCache()" class="btn btn-secondary">🗑️ 캐시 삭제</button>
                </div>

                <div class="subscription-list" id="subscription-list">
                    <!-- 구독 목록이 동적으로 추가됨 -->
                </div>
            </div>

            <!-- 계정 관리 탭 -->
            <div class="tab-pane" id="tab-account-manager">
                <div class="account-manager-container">
                    <!-- 1단계: OAuth 설정 -->
                    <div class="account-setup-step">
                        <div class="step-header">
                            <div class="step-number">1️⃣</div>
                            <div class="step-info">
                                <h3>🔐 OAuth 설정</h3>
                                <p>YouTube API 사용을 위한 OAuth 인증 정보를 입력하세요</p>
                            </div>
                        </div>
                        <div class="step-content">
                            <div class="form-group">
                                <label>Client ID</label>
                                <input type="text" id="oauth-client-id" placeholder="Google Cloud Console에서 발급받은 Client ID" class="input-field">
                            </div>
                            <div class="form-group">
                                <label>Client Secret</label>
                                <input type="password" id="oauth-client-secret" placeholder="Google Cloud Console에서 발급받은 Client Secret" class="input-field">
                            </div>
                            <button onclick="saveOAuthAccount()" class="btn btn-primary btn-large">
                                💾 OAuth 설정 저장
                            </button>
                        </div>
                    </div>

                    <!-- 2단계: 계정 로그인 -->
                    <div class="account-setup-step">
                        <div class="step-header">
                            <div class="step-number">2️⃣</div>
                            <div class="step-info">
                                <h3>👤 YouTube 계정 로그인</h3>
                                <p>Google 계정으로 로그인하여 YouTube 채널에 접근하세요</p>
                            </div>
                        </div>
                        <div class="step-content">
                            <div class="account-list" id="api-account-list">
                                <div class="empty-state-inline">
                                    <span>🔒 등록된 계정이 없습니다</span>
                                </div>
                            </div>
                            <button onclick="addNewAccount()" class="btn btn-success btn-large">
                                ➕ Google 계정으로 로그인
                            </button>
                        </div>
                    </div>

                    <!-- 3단계: 채널 선택 -->
                    <div class="account-setup-step">
                        <div class="step-header">
                            <div class="step-number">3️⃣</div>
                            <div class="step-info">
                                <h3>📺 채널 선택</h3>
                                <p>관리할 YouTube 채널을 선택하세요 (관리자 권한이 있는 모든 채널 표시)</p>
                            </div>
                        </div>
                        <div class="step-content">
                            <button onclick="loadYouTubeChannels()" class="btn btn-secondary btn-large" id="load-channels-btn">
                                🔄 내 채널 목록 불러오기
                            </button>
                            <div id="channel-load-status" class="status-message"></div>
                            <div class="channel-list" id="youtube-channel-list">
                                <div class="empty-state-inline">
                                    <span>📺 "내 채널 목록 불러오기" 버튼을 클릭하세요</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Excel 도구 탭 -->
            <div class="tab-pane" id="tab-excel-tools">
                <div class="section-header">
                    <h2>📊 Excel 도구</h2>
                    <p class="section-description">Excel 파일에서 데이터를 추출합니다.</p>
                </div>

                <div class="excel-container">
                    <div class="excel-section">
                        <h3>📁 파일 선택</h3>
                        <div class="setting-group">
                            <div class="path-input-group">
                                <input type="text" id="excel-files" readonly placeholder="Excel 파일 선택">
                                <button onclick="selectExcelFiles()" class="btn btn-sm">📂</button>
                            </div>
                        </div>

                        <h3>🎯 셀 범위</h3>
                        <div class="setting-group">
                            <label>범위 (예: A1:B10)</label>
                            <input type="text" id="excel-cell-range" placeholder="A1:B10">
                        </div>

                        <div class="excel-actions">
                            <button onclick="extractUrlsFromExcel()" class="btn btn-primary">
                                🔗 URL 추출
                            </button>
                            <button onclick="extractCellsFromExcel()" class="btn btn-primary">
                                📋 셀 추출
                            </button>
                        </div>

                        <div class="excel-results" id="excel-results">
                            <!-- 결과가 여기에 표시됨 -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- 데이터 관리 탭 -->
            <div class="tab-pane" id="tab-data-export">
                <div class="section-header">
                    <h2>💼 데이터 관리</h2>
                    <p class="section-description">데이터를 내보내거나 가져옵니다.</p>
                </div>

                <div class="data-container">
                    <div class="data-section">
                        <h3>📤 내보내기</h3>
                        <button onclick="exportSubscriptions()" class="btn btn-primary">
                            ⭐ 구독 목록 내보내기
                        </button>
                        <button onclick="exportCredentials()" class="btn btn-primary">
                            🔐 인증 정보 내보내기
                        </button>
                    </div>

                    <div class="data-section">
                        <h3>📥 가져오기</h3>
                        <button onclick="importSubscriptions()" class="btn btn-primary">
                            ⭐ 구독 목록 가져오기
                        </button>
                        <button onclick="importCredentials()" class="btn btn-primary">
                            🔐 인증 정보 가져오기
                        </button>
                    </div>

                    <div class="data-section">
                        <h3>📁 데이터 폴더</h3>
                        <div class="setting-group">
                            <input type="text" id="data-folder-path" readonly>
                            <button onclick="openDataFolder()" class="btn btn-sm">📂 열기</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 캐시 관리 탭 -->
            <div class="tab-pane" id="tab-cache-manager">
                <div class="section-header">
                    <h2>🗑️ 캐시 관리</h2>
                    <p class="section-description">캐시를 관리하고 정리합니다.</p>
                </div>

                <div class="cache-container">
                    <div class="cache-stats">
                        <div class="cache-stat-item">
                            <h3>💾 캐시 크기</h3>
                            <p id="cache-size">0 MB</p>
                        </div>
                        <div class="cache-stat-item">
                            <h3>📁 캐시 파일 수</h3>
                            <p id="cache-file-count">0개</p>
                        </div>
                    </div>

                    <div class="cache-actions">
                        <button onclick="refreshCacheStats()" class="btn btn-primary">
                            🔄 통계 새로고침
                        </button>
                        <button onclick="clearCache()" class="btn btn-danger">
                            🗑️ 캐시 삭제
                        </button>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- 설정 모달 -->
    <div id="settings-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2>⚙️ 설정</h2>
                <button class="modal-close" onclick="closeSettingsModal()">✕</button>
            </div>
            <div class="modal-body">

                <!-- Whisper 모델 설정 -->
                <div class="setting-section">
                    <h3>🎤 Whisper 음성인식 모델</h3>
                    <p class="setting-description">자막 타임코드 생성 시 사용할 Whisper 모델을 선택하세요</p>
                    <select id="setting-whisper-model" class="form-control">
                        <option value="tiny">Tiny (가장 빠름, 정확도 낮음)</option>
                        <option value="base" selected>Base (빠름, 기본 정확도)</option>
                        <option value="small">Small (보통 속도, 좋은 정확도)</option>
                        <option value="medium">Medium (느림, 높은 정확도)</option>
                        <option value="large">Large (가장 느림, 최고 정확도)</option>
                    </select>
                </div>

                <!-- 기본 출력 폴더 설정 -->
                <div class="setting-section">
                    <h3>📁 기본 출력 폴더</h3>
                    <p class="setting-description">영상/음성 파일이 저장될 기본 폴더</p>
                    <div style="display: flex; gap: 8px;">
                        <input type="text" id="setting-output-folder" class="form-control" readonly placeholder="선택되지 않음">
                        <button onclick="selectOutputFolder()" class="btn btn-sm">📂 선택</button>
                    </div>
                </div>

                <!-- 자막 설정 -->
                <div class="setting-section">
                    <h3>📝 자막 설정</h3>
                    <p class="setting-description">자막 표시 최대 글자 수</p>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <input type="number" id="setting-subtitle-max-length" class="form-control" min="10" max="100" value="30" style="width: 100px;">
                        <span>글자</span>
                    </div>
                </div>

                <!-- 문장 간 침묵 시간 -->
                <div class="setting-section">
                    <h3>⏱️ 문장 간 침묵 시간</h3>
                    <p class="setting-description">TTS 생성 시 문장 사이 무음 시간 (초)</p>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <input type="number" id="setting-silence-duration" class="form-control" min="0" max="5" step="0.1" value="0.3" style="width: 100px;">
                        <span>초</span>
                    </div>
                </div>

                <!-- UI 테마 -->
                <div class="setting-section">
                    <h3>🎨 UI 테마</h3>
                    <p class="setting-description">인터페이스 색상 테마</p>
                    <select id="setting-theme" class="form-control">
                        <option value="dark" selected>다크 모드</option>
                        <option value="light">라이트 모드</option>
                    </select>
                </div>

                <!-- OAuth 설정 -->
                <div class="setting-section">
                    <h3>🔑 OAuth 인증 설정</h3>
                    <p class="setting-description">YouTube API 사용을 위한 OAuth 2.0 인증 정보</p>
                    <div style="margin-bottom: 12px;">
                        <label style="display: block; font-size: 13px; margin-bottom: 4px; color: var(--text-secondary);">Client ID</label>
                        <input type="text" id="setting-oauth-client-id" class="form-control" placeholder="Google Cloud Console에서 발급받은 Client ID">
                    </div>
                    <div style="margin-bottom: 12px;">
                        <label style="display: block; font-size: 13px; margin-bottom: 4px; color: var(--text-secondary);">Client Secret</label>
                        <input type="text" id="setting-oauth-client-secret" class="form-control" placeholder="Google Cloud Console에서 발급받은 Client Secret">
                    </div>
                    <button onclick="saveOAuthSettings()" class="btn btn-sm btn-primary">💾 OAuth 설정 저장</button>
                    <div style="margin-top: 8px; font-size: 11px; color: var(--text-tertiary);">
                        💡 Google Cloud Console에서 OAuth 2.0 클라이언트 ID를 생성하여 입력하세요
                    </div>
                </div>

                <!-- YouTube 계정 관리 -->
                <div class="setting-section">
                    <h3>📺 YouTube 계정 관리</h3>
                    <p class="setting-description">YouTube 계정 로그인 및 관리 권한 채널 목록</p>

                    <!-- 현재 계정 정보 -->
                    <div id="setting-youtube-account-info" style="margin-bottom: 12px;">
                        <div style="color: var(--text-tertiary); font-size: 12px;">
                            로그인되지 않음
                        </div>
                    </div>

                    <!-- 로그인/로그아웃 버튼 -->
                    <div style="display: flex; gap: 8px; margin-bottom: 16px;">
                        <button onclick="settingsYouTubeLogin()" class="btn btn-sm btn-primary" id="setting-youtube-login-btn">
                            🔑 YouTube 로그인
                        </button>
                        <button onclick="settingsYouTubeLogout()" class="btn btn-sm btn-secondary" id="setting-youtube-logout-btn" style="display: none;">
                            🚪 로그아웃
                        </button>
                    </div>

                    <!-- 채널 목록 -->
                    <div id="setting-youtube-channels" style="display: none;">
                        <div style="font-size: 13px; font-weight: 600; margin-bottom: 8px; color: var(--text-primary);">
                            관리 권한 채널 목록
                        </div>
                        <div id="setting-channel-list" style="max-height: 300px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: var(--radius-sm); background: var(--bg-primary);">
                            <!-- 채널 목록이 동적으로 추가됨 -->
                        </div>
                    </div>
                </div>

                <!-- 저장 버튼 -->
                <div style="margin-top: 24px; display: flex; gap: 8px; justify-content: flex-end;">
                    <button onclick="closeSettingsModal()" class="btn btn-secondary">취소</button>
                    <button onclick="saveSettings()" class="btn btn-primary">💾 저장</button>
                </div>

            </div>
        </div>
    </div>

    <!-- API 키 관리 모달 -->
    <div id="api-key-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>🔑 TTS API 키 관리</h2>
                <button class="modal-close" onclick="closeApiKeyModal()">✕</button>
            </div>
            <div class="modal-body">
                <div class="api-key-section">
                    <h3>📝 등록된 API 키</h3>
                    <div id="api-key-list" class="api-key-list">
                        <!-- API 키 목록이 동적으로 추가됨 -->
                    </div>
                </div>

                <div class="api-key-section">
                    <h3>➕ 새 API 키 추가</h3>
                    <div class="api-key-form">
                        <div class="form-group">
                            <label>API 키 이름 (선택사항)</label>
                            <input type="text" id="new-api-key-name" placeholder="예: 메인 계정">
                        </div>
                        <div class="form-group">
                            <label>Google Cloud TTS API 키</label>
                            <input type="password" id="new-api-key-value" placeholder="AIza...">
                        </div>
                        <button onclick="addApiKey()" class="btn btn-primary">추가</button>
                    </div>
                </div>

                <div class="api-key-info">
                    <h4>ℹ️ API 키 발급 방법</h4>
                    <ol>
                        <li><a href="https://console.cloud.google.com" target="_blank">Google Cloud Console</a>에 접속</li>
                        <li>"API 및 서비스" → "사용자 인증 정보" 이동</li>
                        <li>"사용자 인증 정보 만들기" → "API 키" 선택</li>
                        <li>생성된 API 키를 복사하여 위에 입력</li>
                        <li>"Cloud Text-to-Speech API" 활성화 필요</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <!-- 전체 캐릭터 관리 모달 -->
    <div id="all-characters-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="width: 90%; max-width: 1200px; max-height: 85vh;">
            <div class="modal-header">
                <h3>📋 전체 캐릭터 관리</h3>
                <button class="modal-close" onclick="closeAllCharactersModal()">&times;</button>
            </div>
            <div class="modal-body" style="overflow-y: auto; max-height: calc(85vh - 120px);">
                <div id="all-characters-list" class="all-characters-grid">
                    <!-- 동적으로 캐릭터 카드가 추가됨 -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeAllCharactersModal()">닫기</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script type="text/javascript" src="/eel.js"></script>
    <script src="app.js"></script>
    <script src="quick_convert.js"></script>
    <script src="studio_design.js"></script>
    <script src="batch_production.js"></script>
    <script src="studio.js"></script>
</body>
</html>
